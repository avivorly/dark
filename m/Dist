{"name": "Dist", "keys": [["bins", "integer", 50]], "views": {"graph": [{"title": {"type": "string", "value": "'volt to average'"}, "func": [{"xy": {"type": "code", "value": "[xs, ys]"}}]}]}, "code": "res = []\nkeys = []\nvals = []\nfor i in range(0, len(data)):\n    for j in range(0, len(data[i])):\n        v = data[i][j]\n        if not np.isnan(v):\n            temps = []\n            for (ii, jj) in [\n                [i + 1, j],\n                [i - 1, j],\n                [i + 1, j + 1],\n                [i - 1, j - 1],\n                [i, j - 1],\n                [i, j + 1],\n                [i + 1, j - 1],\n                [i - 1, j + 1],\n            ]:\n                if ii < len(data) and jj < len(data[0]):\n                    t = data[ii][jj]\n                    if not np.isnan(t):\n                        temps.append(t)\n            if temps:\n                res.append([v, np.average(temps)])\n                keys.append(v)\n                vals.append(np.average(temps))\nres = sorted(res, key=lambda val: val[0])\nif False:\n    n = self.o['bins']\n    new_ress = [res[i::n] for i in range(n)]\n    xs = []\n    ys = []\n    for res in new_ress:\n        x = (res[0][0] + res[-1][0]) / 2\n        y = np.average(list(map(lambda v: v[1], res)))\n        xs.append(x)\n        ys.append(y)\nelse:\n    ranges = np.linspace(np.min(keys), np.max(keys), self.o['bins'])\n    # ranges = np.linspace(-200, 400, self.o['bins'])\n    xs = []\n    ys = []\n    l = len(ranges)\n    temp = []\n    temp_res = []\n    for i in range(1, l-1):\n        for j in range(0, len(keys)):\n            k = keys[j]\n            v = vals[j]\n            # if i == 0:\n            #     flag = k < ranges[1]\n            #\n            # elif i == l -1:\n            #     flag = k > ranges[l-2]\n            # else:\n            flag = ranges[i - 1] < k < ranges[i + 1]\n            if flag:\n                temp.append(v)\n            else:\n                temp_res.append(v)\n        xs.append(ranges[i])\n        ys.append(np.average(temp))", "active": 2}